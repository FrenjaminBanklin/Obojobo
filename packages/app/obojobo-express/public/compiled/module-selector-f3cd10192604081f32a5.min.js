!(function(e) {
	var t = {}
	function n(r) {
		if (t[r]) return t[r].exports
		var o = (t[r] = { i: r, l: !1, exports: {} })
		return e[r].call(o.exports, o, o.exports, n), (o.l = !0), o.exports
	}
	;(n.m = e),
		(n.c = t),
		(n.d = function(e, t, r) {
			n.o(e, t) || Object.defineProperty(e, t, { enumerable: !0, get: r })
		}),
		(n.r = function(e) {
			'undefined' != typeof Symbol &&
				Symbol.toStringTag &&
				Object.defineProperty(e, Symbol.toStringTag, { value: 'Module' }),
				Object.defineProperty(e, '__esModule', { value: !0 })
		}),
		(n.t = function(e, t) {
			if ((1 & t && (e = n(e)), 8 & t)) return e
			if (4 & t && 'object' == typeof e && e && e.__esModule) return e
			var r = Object.create(null)
			if (
				(n.r(r),
				Object.defineProperty(r, 'default', { enumerable: !0, value: e }),
				2 & t && 'string' != typeof e)
			)
				for (var o in e)
					n.d(
						r,
						o,
						function(t) {
							return e[t]
						}.bind(null, o)
					)
			return r
		}),
		(n.n = function(e) {
			var t =
				e && e.__esModule
					? function() {
							return e.default
					  }
					: function() {
							return e
					  }
			return n.d(t, 'a', t), t
		}),
		(n.o = function(e, t) {
			return Object.prototype.hasOwnProperty.call(e, t)
		}),
		(n.p = ''),
		n((n.s = 559))
})({
	559: function(e, t, n) {
		e.exports = n(560)
	},
	560: function(e, t, n) {
		'use strict'
		n.r(t)
		n(561)
		!(function() {
			var e = __isAssignment,
				t = __returnUrl,
				n = 'Community Library',
				r = 'My Modules',
				o = 'section-module-selection',
				i = 'section-select-object',
				l = 'section-progress',
				a = 'pre-progress',
				c = 250,
				u = 250,
				s = 20,
				d = 'You have been logged out. Please refresh the page and try again.',
				f = {},
				m = document.querySelectorAll('.template.obo-item')[0],
				y = document.getElementById('list-container'),
				p = document.getElementById('search'),
				v = document.getElementById('progressbar').querySelector('.ui-progressbar-value'),
				g = document.querySelector('.progress-container'),
				b = { items: void 0, allItems: void 0, last: 0 },
				h = -1,
				I = null,
				S = null
			function w(e) {
				for (; e.firstChild; ) e.removeChild(e.firstChild)
			}
			function q(e) {
				;(e.style.display = 'none'), (e.style.opacity = 1)
			}
			function L(e) {
				;(e.style.display = 'block'), (e.style.opacity = 1)
			}
			function k(e) {
				return '.' + e.replace(' ', '-').toLowerCase()
			}
			function E(e, t) {
				t
					? setTimeout(function() {
							E(e)
					  }, t)
					: ((e.style.opacity = 0),
					  (e.style.display = 'block'),
					  (function t() {
							var n = parseFloat(e.style.opacity)
							;(n += 0.1) > 1 || ((e.style.opacity = n), window.requestAnimationFrame(t))
					  })())
			}
			function M() {
				if ('pending' !== b.items) {
					var e = p.value.trim()
					if (p.getAttribute('data-last-search') !== e)
						w(document.querySelector(k(I) + ' ul')),
							(function(e) {
								var t = b.allItems
								if (0 === e.length) return void A()
								var n = e.toLowerCase().split(' ')
								;(b.items = []),
									t.forEach(function(e) {
										var t = (function(e) {
											var t = e.draftId
											f[t] ||
												(f[t] = ''
													.concat(e.title || 'untitled', ' ')
													.concat(e.draftId)
													.toLowerCase())
											return f[t]
										})(e)
										n.find(function(e) {
											return t.indexOf(e) >= 0
										}) && b.items.push(e)
									}),
									(b.last = 0)
							})(e),
							x(I),
							(y.scrollTop = 0)
					p.setAttribute('data-last-search', e)
				}
			}
			function A() {
				var e = k(I)
				w(document.querySelector(e + ' ul')),
					(p.value = ''),
					(b.items = b.allItems),
					(b.last = 0),
					p.setAttribute('data-last-search', '')
			}
			function C(n) {
				var r = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
					o = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : ''
				if (n === a)
					return (
						(document.querySelector('#section-progress h1').innerHTML = S.title),
						(v.style.width = '10%'),
						C(l),
						void setTimeout(function() {
							!(function() {
								for (
									var n = [1, 2, 3, 4, 5, 6, 7, 8, 9], r = { tick: 0 }, o = 0, i = _(3, 5);
									o < i;
									o++
								)
									r[n.splice(_(0, n.length), 1)] = !0
								var l = setInterval(function() {
									r.tick++,
										void 0 !== r[r.tick] && (v.style.width = ''.concat(10 * r.tick, '%')),
										r.tick >= 10 &&
											(clearInterval(l),
											g.classList.add('success'),
											(g.querySelector('span').innerHTML = 'Success!'),
											(v.style.width = '100%'),
											setTimeout(function() {
												var n,
													r = (function(e, t) {
														var n = arguments.length > 2 && void 0 !== arguments[2] && arguments[2]
														return {
															'@context': 'http://purl.imsglobal.org/ctx/lti/v1/ContentItem',
															'@graph': [
																{
																	'@type': 'LtiLinkItem',
																	url: t,
																	title: n ? e : e + " (doesn't send scores to gradebook)",
																	placementAdvice: { presentationDocumentTarget: 'window' }
																}
															]
														}
													})(S.title, ((n = S.draftId), window.location.origin + '/view/' + n), e),
													o = document.getElementById('submit-form')
												;(o.querySelector('input[name=content_items]').value = JSON.stringify(r)),
													o.setAttribute('action', t),
													o.submit()
											}, 1e3))
								}, 200)
							})()
						}, 500)
					)
				var i = document.querySelectorAll('section[style*="display: block"]'),
					c = document.getElementById(n)
				;(c.className = ''),
					o && c.classList.add(o),
					0 === i.length
						? r
							? L(c)
							: E(c)
						: r
						? (i.forEach(function(e) {
								q(e)
						  }),
						  L(c))
						: (i.forEach(function(e) {
								var t
								;((t = e).style.opacity = 1),
									(function e() {
										;(t.style.opacity -= 0.1) < 0
											? (t.style.display = 'none')
											: window.requestAnimationFrame(e)
									})()
						  }),
						  E(c, u))
			}
			function T(e) {
				j((I = e))
			}
			function _(e, t) {
				return Math.floor(Math.random() * (t - e + 1)) + e
			}
			function B(e, t) {
				var n = m.cloneNode(!0)
				n.classList.remove('template'),
					(n.querySelector('.title').innerHTML = e.title ? e.title : 'Untitled'),
					(n.querySelector('.draft-id').innerHTML = 'id: ' + e.draftId),
					n.querySelector('.preview').setAttribute('href', '/preview/' + e.draftId),
					n.setAttribute('data-lo-id', e.draftId),
					n.querySelector('.button').addEventListener('click', O),
					t.appendChild(n)
			}
			function j(e) {
				D(e), q(y.querySelector('.section')), (p.value = '')
				var t = '',
					o = '',
					i = ''
				switch (e) {
					default:
					case r:
						;(t = 'Personal Library'), (o = '/api/drafts'), (i = 'blue')
						break
					case n:
						;(t = 'Community Collection'), (o = '/api/drafts-public'), (i = 'purple')
				}
				var l = k(e)
				document.querySelector(l).classList.add(i),
					(document.getElementById('select-section-title').innerHTML = t),
					(b.items = 'pending')
				fetch(o, { credentials: 'same-origin' })
					.then(function(e) {
						return e.json()
					})
					.then(function(t) {
						if ('ok' !== t.status) throw 'Failed loading modules'
						;(b.allItems = b.items = t.value), x(e), '' !== p.value && M()
					})
					.catch(function(e) {
						var t, n, r
						;(n = void 0 !== (t = e) && void 0 !== t.errorID) && 1 === t.errorID
							? ((r = d), C('dead', !0), (C = function() {}), window.alert(r))
							: n
							? P(t.errorID)
							: P()
					})
			}
			function x(e) {
				var t = k(e),
					n = b.items,
					r = Math.min(Math.min(n.length, s) + b.last, n.length),
					o = document.querySelector(t),
					i = o.querySelector('ul')
				if (0 === n.length) L(o.querySelector('.no-items'))
				else {
					q(o.querySelector('.no-items'))
					for (var l = r, a = b.last; a < l; a++) B(n[a], i)
					b.last = r
				}
				L(o)
			}
			function D(e) {
				var t = document.querySelector(k(e))
				;(b.items = void 0), (b.last = 0), w(t.querySelector('ul')), q(t.querySelector('.no-items'))
			}
			function O(e) {
				e.preventDefault()
				var t = this.parentNode.parentNode.parentNode.getAttribute('data-lo-id')
				;(S = (function(e) {
					return b.allItems.find(function(t) {
						return t.draftId === e
					})
				})(t)),
					C(a)
			}
			function P(e) {
				C('dead', !0)
				var t = 'Sorry, something went wrong. Please try again.'
				void 0 !== e && (t += ' (' + e + ')'), window.alert(t), C(o)
			}
			y.querySelector('ul.template').remove(),
				p.addEventListener('keyup', function(e) {
					clearInterval(h),
						27 === e.keyCode
							? (A(), x(I))
							: (h = setInterval(function() {
									clearInterval(h), M()
							  }, c))
				}),
				document.getElementById('refresh').addEventListener('click', function(e) {
					e.preventDefault(), void 0 !== b.items && 'pending' !== b.items && (D(I), j(I))
				}),
				document.getElementById('back-button').addEventListener('click', function(e) {
					e.preventDefault(), C(o)
				}),
				document.getElementById('community-library-button').addEventListener('click', function(e) {
					e.preventDefault(), C(i, !1, 'purple'), T(n)
				}),
				document.getElementById('personal-library-button').addEventListener('click', function(e) {
					e.preventDefault(), C(i, !1, 'blue'), T(r)
				}),
				C(o)
		})()
	},
	561: function(e, t, n) {}
})
